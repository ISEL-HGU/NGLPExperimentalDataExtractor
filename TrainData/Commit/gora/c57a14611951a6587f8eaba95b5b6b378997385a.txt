  protected static final int DEFAULT_SOLR_CONCURRENT_CLIENT_QUEUE_SIZE = 1000;

  protected static final int DEFAULT_SOLR_CONCURRENT_CLIENT_THREAD_COUNT = 10;

  protected static final String SOLR_CONCURRENT_CLIENT_QUEUE_SIZE_PROPERTY
          = "solr.concurrentclient.queue_size";

  protected static final String SOLR_CONCURRENT_CLIENT_THREAD_COUNT_PROPERTY
          = "solr.concurrentclient.thread_count";

  private int queueSize = DEFAULT_SOLR_CONCURRENT_CLIENT_QUEUE_SIZE;

  private int threadCount = DEFAULT_SOLR_CONCURRENT_CLIENT_THREAD_COUNT;


    String queueSizeString = DataStoreFactory.findProperty(properties, this,
            SOLR_CONCURRENT_CLIENT_QUEUE_SIZE_PROPERTY, null);
    if (queueSizeString != null) {
      try {
        queueSize = Integer.parseInt(queueSizeString);
      } catch (NumberFormatException nfe) {
        LOG.warn("Invalid concurrent client queue size '{}' , using default {}", queueSizeString,
                DEFAULT_SOLR_CONCURRENT_CLIENT_QUEUE_SIZE);
      }
    }

    String threadCountString = DataStoreFactory.findProperty(properties, this,
            SOLR_CONCURRENT_CLIENT_THREAD_COUNT_PROPERTY, null);
    if (threadCountString != null) {
      try {
        threadCount = Integer.parseInt(threadCountString);
      } catch (NumberFormatException nfe) {
        LOG.warn("Invalid concurrent client thread count '{}' , using default {}", threadCountString,
                DEFAULT_SOLR_CONCURRENT_CLIENT_THREAD_COUNT);
      }
    }

                .withQueueSize(queueSize)
                .withThreadCount(threadCount)
                .withQueueSize(queueSize)
                .withThreadCount(threadCount)
                .withQueueSize(queueSize)
                .withThreadCount(threadCount)
                .withQueueSize(queueSize)
                .withThreadCount(threadCount)
