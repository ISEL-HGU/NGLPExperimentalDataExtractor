import java.util.concurrent.atomic.AtomicBoolean;
    // optimise to be able to quick check for start functions
    private static final String[] FUNCTION_START = new String[]{"${", "$simple{"};

            return expression.contains(FUNCTION_START[0]) || expression.contains(FUNCTION_START[1]);
        if (startToken.length > 2) {
            throw new IllegalArgumentException("At most 2 start tokens is allowed");
        }

        // reset
        FUNCTION_START[0] = "";
        FUNCTION_START[1] = "";

        for (int i = 0; i < startToken.length; i) {
            String token = startToken[i];
            FUNCTION_START[i] = token;
