import java.util.regex.Matcher;
import java.util.regex.Pattern;
    // TODO: Add support for Map/List in keys
        // TODO: support key without nested dots

    private static Object getOrElseProperty(Object target, String property, Object defaultValue) {
        String key = property;
        String mapKey = null;

        // support maps in keys
        if (property.contains("[") && property.endsWith("]")) {
            int pos = property.indexOf('[');
            mapKey = property.substring(pos  1, property.length() - 1);
            key = property.substring(0, pos);
        }

        Object answer = IntrospectionSupport.getOrElseProperty(target, key, defaultValue);
        if (answer instanceof Map && mapKey != null) {
            Map map = (Map) answer;
            answer = map.getOrDefault(mapKey, defaultValue);
        }

        return answer;
    }

