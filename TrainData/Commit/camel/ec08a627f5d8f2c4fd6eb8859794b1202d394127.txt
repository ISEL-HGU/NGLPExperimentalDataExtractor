import org.apache.camel.WrappedFile;
        Object body = exchange.getIn().getBody();

        if (body instanceof WrappedFile) {
            // unwrap file
            body = ((WrappedFile) body).getFile();

        InputStream is;
        if (body instanceof InputStream) {
            is = (InputStream) body;
        } else if (body instanceof File) {
            is = new FileInputStream((File)body);
        } else if (body instanceof byte[]) {
            is = new ByteArrayInputStream((byte[]) body);
        } else {
            // try as input stream
            is = exchange.getContext().getTypeConverter().tryConvertTo(InputStream.class, exchange, body);
        }

        if (is == null) {
            // fallback to string based
            throw new IllegalArgumentException("Unsupported blob type:"  body.getClass().getName());
        }

        return is;
