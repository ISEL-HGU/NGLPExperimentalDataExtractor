import com.amazonaws.services.sns.model.*;
import org.apache.camel.spi.HeaderFilterStrategy;
import java.nio.ByteBuffer;
import java.util.HashMap;
import java.util.Iterator;
import java.util.Map;
import java.util.Map.Entry;

        request.setMessageAttributes(this.translateAttributes(exchange.getIn().getHeaders(), exchange));
        
	private Map<String, MessageAttributeValue> translateAttributes(Map<String, Object> headers, Exchange exchange) {
        HashMap result = new HashMap();
        HeaderFilterStrategy headerFilterStrategy = this.getEndpoint().getHeaderFilterStrategy();
        Iterator var5 = headers.entrySet().iterator();

        while(var5.hasNext()) {
            Entry entry = (Entry)var5.next();
            if(!headerFilterStrategy.applyFilterToCamelHeaders((String)entry.getKey(), entry.getValue(), exchange)) {
                Object value = entry.getValue();
                MessageAttributeValue mav;
                if(value instanceof String) {
                    mav = new MessageAttributeValue();
                    mav.setDataType("String");
                    mav.withStringValue((String)value);
                    result.put(entry.getKey(), mav);
                } else if(value instanceof ByteBuffer) {
                    mav = new MessageAttributeValue();
                    mav.setDataType("Binary");
                    mav.withBinaryValue((ByteBuffer)value);
                    result.put(entry.getKey(), mav);
                } else {
                    LOG.warn("Cannot put the message header key={}, value={} into Sqs MessageAttribute", entry.getKey(), entry.getValue());
                }
            }
        }

        return result;
    }
	
	
	
