                    Span parent = ActiveSpanManager.getSpan(ese.getExchange());
                    if (parent != null) {
                        spanBuilder.asChildOf(parent);
                    ActiveSpanManager.activate(ese.getExchange(), span);

                    Span span = ActiveSpanManager.getSpan(ese.getExchange());
                    if (span != null) {
                        if (LOG.isTraceEnabled()) {
                            LOG.trace("OpenTracing: start client span="  span);
                        }
                        sd.post(span, ese.getExchange(), ese.getEndpoint());
                        span.finish();
                        ActiveSpanManager.deactivate(ese.getExchange());
                        LOG.warn("OpenTracing: could not find managed span for exchange="  ese.getExchange());
                ActiveSpanManager.activate(exchange, span);
                Span span = ActiveSpanManager.getSpan(exchange);
                if (span != null) {
                        LOG.trace("OpenTracing: finish server span="  span);
                    sd.post(span, exchange, route.getEndpoint());
                    span.finish();
                    ActiveSpanManager.deactivate(exchange);
                Span span = ActiveSpanManager.getSpan(exchange);
