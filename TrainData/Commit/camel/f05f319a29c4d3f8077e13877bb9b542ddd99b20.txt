import org.apache.camel.Service;
import org.codehaus.groovy.runtime.InvokerHelper;
    private final LRUSoftCache<String, GroovyClassService> scriptCache = new LRUSoftCache<String, GroovyClassService>(16, 1000, true);

    private static final class GroovyClassService implements Service {

        private final Class<Script> script;

        private GroovyClassService(Class<Script> script) {
            this.script = script;
        }

        @Override
        public void start() throws Exception {
        }

        @Override
        public void stop() throws Exception {
            InvokerHelper.removeClass(script);
        }

    }
        final GroovyClassService cached = scriptCache.get(script);

        if (cached == null) {
            return null;
        }

        return cached.script;
        scriptCache.put(script, new GroovyClassService(scriptClass));
