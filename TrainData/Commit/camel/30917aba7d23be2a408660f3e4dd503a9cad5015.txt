import org.apache.camel.processor.SharedCamelInternalProcessor;
    private final SharedCamelInternalProcessor internalProcessor;

        // internal processor used for sending
        internalProcessor = new SharedCamelInternalProcessor(new CamelInternalProcessor.UnitOfWorkProcessorAdvice(null));
            AsyncProcessor target = prepareProducer(producer);
            // invoke the asynchronous method
            return internalProcessor.process(exchange, callback, target, resultProcessor);
                    AsyncProcessor target = prepareProducer(producer);
                    // invoke the synchronous method
                    internalProcessor.process(exchange, target, resultProcessor);

    protected AsyncProcessor prepareProducer(Producer producer) {
        return AsyncProcessorConverterHelper.convert(producer);
