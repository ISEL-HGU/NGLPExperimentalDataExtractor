import org.apache.camel.converter.IOConverter;
import org.apache.camel.util.StringHelper;
        if (in instanceof IOConverter.EncodingInputStream) {
            // DocumentBuilder detects encoding from XML declaration, so we need to
            // revert the converted encoding for the input stream
            IOConverter.EncodingInputStream encIn = (IOConverter.EncodingInputStream) in;
            return documentBuilder.parse(encIn.toOriginalInputStream());
        } else {
            return documentBuilder.parse(in);
        }
