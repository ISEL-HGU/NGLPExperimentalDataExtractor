import java.util.LinkedList;
import java.util.TreeMap;
                    for (String value : entry.getValue()) {
                        if (log.isTraceEnabled()) {
                            log.trace("Adding header {} = {}", key, value);
                        }
                        builder.addHeader(key, value);                        
        Map<String, List<String>> m = new TreeMap<String, List<String>>(String.CASE_INSENSITIVE_ORDER);
            if (!m.containsKey(key)) {
                m.put(key, new LinkedList<String>());
                exchange.getOut().getHeaders().put(key, value);
            }
            m.get(key).add(value);
