import org.apache.ace.bnd.registry.RegistryImpl;
import org.apache.ace.bnd.repository.AceObrRepository;
import org.apache.ace.bnd.repository.AceUrlConnector;
import org.apache.ace.connectionfactory.ConnectionFactory;
    private volatile ConnectionFactory m_connectionFactory;

    public CommandRepo repo(@Descriptor("the type e { R5, OBR }") String type, @Descriptor("url of the repository index") String location) throws Exception {
        AceObrRepository repo = createRepository(type, location);

        // ACE-624 allow support for different auth mechanisms...
        RegistryImpl registry = new RegistryImpl(m_connectionFactory, new AceUrlConnector(m_connectionFactory));
        repo.setRegistry(registry);

        return new CommandRepo(repo);
