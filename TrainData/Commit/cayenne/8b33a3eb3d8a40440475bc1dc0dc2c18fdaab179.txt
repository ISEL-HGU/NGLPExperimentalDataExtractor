import org.apache.cayenne.ObjectContext;
import org.apache.cayenne.configuration.server.ServerRuntime;
import org.apache.cayenne.testdo.testmap.Painting;
	ServerRuntime runtime;

	@Inject
	public void testBatchIteratorWithNullExpression() throws Exception {

		ObjectContext insertContext = runtime.newContext();

		List<Ordering> orderings = Artist.ARTIST_NAME.ascInsensitives();
		try (ResultBatchIterator<Artist> it = ObjectSelect.query(Artist.class, null, orderings).batchIterator(context, 5);) {
			int count = 0;

			for (List<Artist> artistList : it) {
				count;
				for(Artist artist : artistList) {
					Painting painting = insertContext.newObject(Painting.class);
					painting.setPaintingTitle("painting "  count);
					painting.setPaintingDescription("artist "  artist.getArtistName());
				}
				assertEquals(5, artistList.size());
				insertContext.commitChanges();
			}

			assertEquals(4, count);
		}
	}

	@Test
