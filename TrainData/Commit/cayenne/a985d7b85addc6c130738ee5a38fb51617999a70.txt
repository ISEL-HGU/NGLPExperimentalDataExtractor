import java.lang.reflect.Constructor;
    private static Constructor<? extends ComponentUI> winFieldUIConstructor;

    static {
        try {
            @SuppressWarnings("unchecked")
            Class<? extends ComponentUI> winFieldUIClass = (Class<? extends ComponentUI>)Class
                    .forName("com.jgoodies.looks.windows.WindowsTextFieldUI");
            winFieldUIConstructor = winFieldUIClass.getDeclaredConstructor();
        } catch (ClassNotFoundException | NoSuchMethodException ex) {
            winFieldUIConstructor = null;
        }
    }

        if(winFieldUIConstructor == null) {
            return new BasicTextFieldUI();
        }
        try {
            return winFieldUIConstructor.newInstance();
        } catch (Exception ex) {
            return new BasicTextFieldUI();
        }
