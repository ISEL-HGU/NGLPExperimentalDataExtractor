        if (null == key) {
            return null;
        }

            if (null != value) {
                return value;
            }
            if (null != value) {
                return value;
            }

            if (null == valueProvider) {
                return null;
            }
            if (shouldCache) {
                map.put(key, value);
            }
