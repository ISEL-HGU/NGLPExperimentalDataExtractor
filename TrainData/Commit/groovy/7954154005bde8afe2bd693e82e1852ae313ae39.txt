    private static final ClassNode INVOKERHELPER_TYPE = make(InvokerHelper.class);
    private static final MethodNode CLOSURE_GETTHISOBJECT_METHOD = CLOSURE_TYPE.getMethod("getThisObject", Parameter.EMPTY_ARRAY);
    private static final MethodNode MAP_GET_METHOD = MAP_TYPE.getMethod("get", new Parameter[] {new Parameter(OBJECT_TYPE, "key")});
    private static final MethodNode GROOVYOBJECT_GETPROPERTY_METHOD = GROOVY_OBJECT_TYPE.getMethod("getProperty", new Parameter[] {new Parameter(STRING_TYPE, "propertyName")});
    private static final MethodNode INVOKERHELPER_GETPROPERTY_METHOD = INVOKERHELPER_TYPE.getMethod("getProperty", new Parameter[] {new Parameter(OBJECT_TYPE, "object"), new Parameter(STRING_TYPE, "propertyName")});
    private static final MethodNode INVOKERHELPER_GETPROPERTYSAFE_METHOD = INVOKERHELPER_TYPE.getMethod("getPropertySafe", new Parameter[] {new Parameter(OBJECT_TYPE, "object"), new Parameter(STRING_TYPE, "propertyName")});
        if (makeGetField(receiver, receiverType, methodName, safe, implicitThis)) return;
            if (makeGetField(receiver, receiver.getType(), methodName, safe, implicitThis)) return;
            if (makeGetField(receiver, CLASS_Type, methodName, safe, false)) return;
        if (makeGetField(receiver, receiverType, property, safe, implicitThis)) return;
    boolean makeGetField(final Expression receiver, final ClassNode receiverType, final String fieldName, final boolean safe, final boolean implicitThis) {
        if (field != null && isDirectAccessAllowed(field, controller.getClassNode())) {
            if (intf != receiverType && makeGetField(receiver, intf, fieldName, safe, implicitThis)) {
        if (superClass != null) {
            return makeGetField(receiver, superClass, fieldName, safe, implicitThis);
    private static boolean isDirectAccessAllowed(FieldNode field, ClassNode receiver) {
        // finally public and visible
        return field.isPublic() || samePackages(receiver.getPackageName(), declaringClass.getPackageName());
        if (makeGetField(receiver, receiverType, name, safe, implicitThis)) return true;
            if (makeGetField(receiver, receiver.getType(), name, safe, implicitThis)) return true;
        if (isClassReceiver && makeGetField(receiver, CLASS_Type, name, safe, false)) return true;
