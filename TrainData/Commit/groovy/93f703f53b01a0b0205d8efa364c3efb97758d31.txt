import java.sql.ParameterMetaData;
import groovy.lang.MissingPropertyException;
        ParameterMetaData metaData = statement.getParameterMetaData();
        if (metaData.getParameterCount() == 0 && params.size() == 1 && params.get(0) instanceof Map) {
            Map paramsMap = (Map) params.get(0);
            if (paramsMap.isEmpty()) return;
        }
        if (metaData.getParameterCount() != params.size()) {
            throw new IllegalArgumentException("Found "  metaData.getParameterCount()  " parameter placeholders but supplied with "  params.size()  " parameters");
        }
            try {
                updatedParams.add(prop.equals("<this>") ? params.get(index) : InvokerHelper.getProperty(params.get(index), prop));
            } catch(MissingPropertyException mpe) {
                throw new IllegalArgumentException("Property '"  prop  "' not found for parameter "  index);
            }
