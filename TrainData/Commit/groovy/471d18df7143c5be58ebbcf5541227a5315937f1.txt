    public ProcessingUnit(final CompilerConfiguration configuration, final GroovyClassLoader classLoader, final ErrorCollector errorCollector) {
        setClassLoader(classLoader);
        configure(configuration != null ? configuration : CompilerConfiguration.DEFAULT);
        this.errorCollector = errorCollector != null ? errorCollector : new ErrorCollector(getConfiguration());
