                name = getClassName(doInitialClassTest, name, varName);
                if (name == null) return null;
                name = getClassName(doInitialClassTest, name, propertyPart);

        if (null == name || name.length() == 0) return null;

    private static StringBuilder getClassName(boolean doInitialClassTest, StringBuilder name, String varName) {
        if (doInitialClassTest) {
            // we are at the first name part. This is the right most part.
            // If this part is in lower case, then we do not need a class
            // check. other parts of the property expression will be tested
            // by a different method call to this method, so foo.Bar.bar
            // can still be resolved to the class foo.Bar and the static
            // field bar.
            if (!testVanillaNameForClass(varName)) return null;
            doInitialClassTest = false;
            name = new StringBuilder(varName);
        } else {
            name.insert(0, varName  ".");
        }
        return name;
    }

