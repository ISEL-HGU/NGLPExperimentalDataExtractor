import java.lang.reflect.Field;

    public static void setDefault(final URLHandler def) {
            // check for the presence of HttpComponents HttpClient
            Class.forName("org.apache.http.client.HttpClient");
            // load our (wrapper) http handler
            final Class<?> handler = Class.forName("org.apache.ivy.util.url.HttpClientHandler");
            // we always use just one instance which is internally registered to be closed
            // when the JVM exits
            final Field instance = handler.getDeclaredField("DELETE_ON_EXIT_INSTANCE");
            return (URLHandler) instance.get(null);
        } catch (ClassNotFoundException | NoSuchFieldException | IllegalAccessException e) {
            Message.verbose("Using JDK backed URL handler for HTTP interaction since the " 
                    "Apache HttpComponents HttpClient backed handler couldn't be created due to: "  e.getMessage());
