        // Parse the URI object from provided string.
        // Generate a new GuacamoleConfiguration
        GuacamoleConfiguration qcConfig = new GuacamoleConfiguration();
        // Check for provided protocol or use default
        if (protocol != null && !protocol.isEmpty())
            qcConfig.setProtocol(protocol);
        else
            qcConfig.setProtocol(DEFAULT_URI_PROTOCOL);
        // Check for provided port number
        if (port > 0)
            qcConfig.setParameter("port", Integer.toString(port));

        // Check for provided host or use default
        if (host != null && !host.isEmpty())
            qcConfig.setParameter("hostname", host);
        else
            qcConfig.setParameter("hostname", DEFAULT_URI_HOST);
                Map<String, String> queryParams = parseQueryString(query);
                if (queryParams != null)
                    for (Map.Entry<String, String> entry: queryParams.entrySet())
                        qcConfig.setParameter(entry.getKey(), entry.getValue());
                String username = userinfoMatcher.group(USERNAME_GROUP);
                String password = userinfoMatcher.group(PASSWORD_GROUP);

                if (username != null && !username.isEmpty())
                    qcConfig.setParameter("username", username);

                if (password != null && !password.isEmpty())
                    qcConfig.setParameter("password", password);
